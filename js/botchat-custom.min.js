var params=BotChat.queryParams(location.search),user={id:params.userid||"userid",name:params.username||"You"},bot={id:params.botid||"botid",name:params.botname||"botname"},botConnection,connected;window.botchatDebug=params.debug&&params.debug==="true";botConnection=new BotChat.DirectLine({secret:"gDXcojMF4Qs.cwA.Zrw.3o_6kzW1vmD2cMj7-WgH5oj9bV8-9TNPH1FSkMNpnds",token:params.t,domain:params.domain,webSocket:params.webSocket&&params.webSocket==="true"});botConnection.activity$.filter(function(n){n.type==="event"&&n.name==="changeBackground"}).subscribe(function(n){changeBackgroundColor(n.value)});changeBackgroundColor=function(n){document.body.style.backgroundColor=n};connected=!1;$("#open-bot").on("click",function(){return $("#botchat").show(),$("#open-bot").hide(),connected==!1&&(BotChat.App({directLine:botConnection,user:user,bot:bot,locale:params.locale,resize:"detect",sendTyping:!0},document.getElementById("botchat")),connected=!0,botConnection.postActivity({type:"event",value:"",from:{id:user.id},name:"buttonClicked"}).subscribe(function(){console.log("success")}),$(".wc-chatview-panel > .wc-header").append("<span id='close-bot' style='float:right;'>閉じる<\/span><span style='fload: clear;'><\/span>")),!1});$(document).on("click","#close-bot",function(){$("#open-bot").show();$("#botchat").hide()});